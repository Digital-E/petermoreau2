import React, { useEffect, useRef } from "react";
import styled from "styled-components";
import LanguageSelector from "./language-selector";
import Navigation from "./navigation";

const Container = styled.div``;

const NavBar = styled.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  z-index: 999;
  background: white;
  overflow-x: scroll;
  border-bottom: 1px solid black;
`;

const Logo = styled.div`
  margin: 2.5rem 1.5rem 1rem 1.5rem;
  width: 100%;
  top: 0;
  left: 0;

  svg {
    width: 60%;
  }

  @media (max-width: 576px) {
    svg {
      width: 70%;
    }
  }
`;

const BottomBar = styled.div`
  position: relative;
  display: flex;
  flex-direction: column;
  font-family: "Century Expanded Regular";
  font-size: 1rem;
  display: flex;
  padding: 0.3rem 1.5rem;
  border-top: 2px solid black;
  border-bottom: 5px solid black;
  width: 100%;
  z-index: 1;
  background: white;

  @media (min-width: 992px) {
    flex-direction: row;
  }
`;

const LeftCol = styled.div``;

const RightCol = styled.div`
  margin-left: 0;

  @media (min-width: 992px) {
    margin-left: 5rem;
  }
`;

export default ({ data }) => {
  const setFixedLogo = () => {
    let logoRef = document.querySelector("#logoRef");
    let bottombarRef = document.querySelector("#bottombarRef");
    //Reset
    logoRef.style.position = "relative";
    logoRef.style.height = "auto";
    document.querySelector(".section-2").style.marginTop = `0px`;
    //Reset
    let marginSize =
      3 * parseFloat(getComputedStyle(document.documentElement).fontSize);
    let logoHeight = logoRef.getBoundingClientRect().height;
    logoRef.style.height = `${logoHeight}px`;
    logoRef.style.position = "fixed";
    //
    bottombarRef.style.top = `${logoHeight + marginSize}px`;
    document.querySelector(".section-2").style.marginTop = `${
      logoHeight + marginSize
    }px`;
  };

  useEffect(() => {
    setFixedLogo();

    window.addEventListener("resize", () => setFixedLogo());
  }, []);

  return (
    <Container>
      <NavBar>
        <Navigation data={data.navigationElements} />
        <LanguageSelector />
      </NavBar>
      <Logo id="logoRef">
        <svg viewBox="0 0 820.66 518.01"><path d="M178.77,396.12l17.41-128.89h43.3V514.38c-1.82.52-27.92.73-33.49.28l-.18-.16c-.05-.06-.12-.12-.14-.18a6.14,6.14,0,0,1-.11-.95q0-77.74-.22-155.51C201.5,383.92,198,410,194.43,436.12s-7.14,52.25-10.73,78.51H169.19L147.51,358.08l-.46,0V514.64H114.69V267.47c1.75-.48,42.31-.66,46.52-.19l17.1,128.86ZM756.3,108.37a139.71,139.71,0,0,0,15.86-18.28A61.69,61.69,0,0,0,783.4,62.87a133.12,133.12,0,0,0,.91-22.74,72.79,72.79,0,0,0-2.17-16.85c-3.2-11.92-10.63-19.53-22.85-21.9a72.15,72.15,0,0,0-27.9,0c-11.16,2.21-19.22,8.69-24,19.07a42.45,42.45,0,0,0-3.92,15.25c-.32,5.34-.41,10.7-.39,16.06a108.91,108.91,0,0,0,2.56,22.83c2.42,11.14,6.43,21.74,10.86,32.21.33.79.66,1.59,1,2.4-.84.79-1.54,1.44-2.24,2.1Q690,135.27,689,170.1c-.2,7-.16,14.08,0,21.11a83.82,83.82,0,0,0,5.3,27.9c6,15.53,16.51,26.46,32.65,31.39,11.69,3.57,23.68,3.57,35.64,1.94a33.58,33.58,0,0,0,19.07-9.37,6,6,0,0,1,.87-.56c7.82,8.25,17.59,12.24,28.78,13.68L820.66,223c-7.58-1.13-14-3.78-18.89-9.45a172.07,172.07,0,0,0,6.79-22.38c4-17.12,5.69-34.53,6.61-52,.62-11.82.85-23.65,1.24-35.48,0-.68-.06-1.37-.09-2-4.55-.46-29.79-.28-31.5.21a1.67,1.67,0,0,0-.14.44c0,1.28,0,2.56,0,3.84,0,19.75.39,39.51-1.06,59.24-.28,3.77-.67,7.52-1,11.28l-.55.07-28-66.59A24.55,24.55,0,0,0,756.3,108.37Zm-3.1,113a23.74,23.74,0,0,1-20.54-10.79,45.07,45.07,0,0,1-6.6-16.33,79.31,79.31,0,0,1-2-17.11c0-7,.09-14.06.52-21.07a65.7,65.7,0,0,1,3.92-18c.2-.57.52-1.1,1-2l36.69,81.16A20.72,20.72,0,0,1,753.19,221.36ZM737.55,68.83c-2.71-9.35-3.08-18.91-2.35-28.52A18.25,18.25,0,0,1,737,33.93c1.7-3.52,4.91-4.63,8.63-4.3,3.9.34,6.15,2.2,7.19,6a21.57,21.57,0,0,1,.86,5.19c.18,8,.41,16-.83,23.94s-4.42,14.78-9,21.68A159.1,159.1,0,0,1,737.55,68.83ZM524.39,250.18c-.24-1-.39-1.85-.64-2.65-.58-1.82-1.32-3.6-1.81-5.45a50.13,50.13,0,0,1-1.27-12.86q0-42.24,0-84.48a60.72,60.72,0,0,0-.58-8.84c-1.22-8.19-5.39-14.41-12.83-18.3-.59-.31-1.15-.67-1.81-1.06a5.28,5.28,0,0,1,.7-.58c5.69-2.95,9.29-7.7,11.61-13.53a42.33,42.33,0,0,0,2.9-15.71c0-16.16.11-32.32-.07-48.48A62.7,62.7,0,0,0,519,25.41C516.44,13.77,509.32,6.36,497.48,4a57.42,57.42,0,0,0-10.93-1.28c-19.68-.13-39.36-.08-59-.07a15,15,0,0,0-1.79.21V250.14h36.21V184c0-7.36,0-14.72,0-22.08s-.12-14.65.09-22c4.43,0,8.57,0,12.72,0a11,11,0,0,1,1.89.33c4.18.78,6.75,3.28,7.39,7.45a59.32,59.32,0,0,1,.6,8.83c0,23.84,0,47.68,0,71.52,0,3.6.13,7.2.41,10.79.31,3.91.94,7.78,3.09,11.29ZM462.06,36.65c.13-.12.25-.32.37-.32,4.46.08,9-.1,13.38.35,4.83.5,7.37,3.19,8.27,8a30.38,30.38,0,0,1,.54,5.47c0,12.79.09,25.57,0,38.36a29.89,29.89,0,0,1-1.13,7.78c-1.47,5.18-5.17,7.93-10.58,8.12-3.51.12-7,0-10.82,0Zm-2,343.7c5.58-3,9.12-7.66,11.43-13.39a41.06,41.06,0,0,0,2.93-15.23q.13-24.83,0-49.67a49.07,49.07,0,0,0-2.75-16.24,25.51,25.51,0,0,0-17.28-16.62,50.09,50.09,0,0,0-14.91-2.1q-28.91,0-57.83,0c-.69,0-1.38.09-2,.14-.49,4.06-.3,245.73.17,247.41h35.93V404.47c4.6,0,8.91,0,13.21,0a6.22,6.22,0,0,1,1.17.23c4.83,1,7.25,3.43,7.9,8.35a60.91,60.91,0,0,1,.47,7.89c0,24.07,0,48.15,0,72.22,0,3.83.19,7.67.52,11.49a21.25,21.25,0,0,0,3,10h36.08c-.24-1.07-.39-2-.66-2.85-.48-1.52-1.1-3-1.54-4.53A48.38,48.38,0,0,1,474.45,494q0-42.47,0-84.94a61.32,61.32,0,0,0-.46-7.65c-1.1-8.66-5.26-15.31-13.14-19.4l-1.77-.94A10.32,10.32,0,0,1,460,380.35Zm-30.58-79.21c5,.57,7.63,3.36,8.47,8.37a35.65,35.65,0,0,1,.51,5.72c0,12.39.1,24.78,0,37.17a32.26,32.26,0,0,1-1.27,8.48c-1.48,5.12-5.12,7.8-10.42,8-3.58.13-7.17,0-10.92,0V300.54C420.54,300.72,425,300.63,429.45,301.13Zm-70.32,24c0-4.56-.1-9.12-.4-13.67A70.88,70.88,0,0,0,354,289.31c-4.9-12-13.55-19.86-26.24-22.78a81.1,81.1,0,0,0-35.7-.18c-12.87,2.79-21.79,10.63-26.85,22.78a60.47,60.47,0,0,0-2.41,7c-2.4,8.62-3,17.46-3,26.37q0,68,0,136.07a121.07,121.07,0,0,0,1,17.23,63.19,63.19,0,0,0,6.27,20.79c5.16,9.79,13.12,16,23.71,19.24,7.79,2.39,29.69,2.37,37.36.16,11.3-3.27,19.49-10,24.5-20.61a61.22,61.22,0,0,0,4.64-14.83,122,122,0,0,0,1.79-22.69q0-33.6,0-67.2Q359.15,357.92,359.14,325.16Zm-37,136.05c0,3.18-.47,6.36-.73,9.54a6.17,6.17,0,0,1-.17.94c-1.87,7.71-7.85,11.15-15.49,8.89a10.66,10.66,0,0,1-6.8-6,23.54,23.54,0,0,1-2-8.58c-.12-1.75-.12-3.52-.12-5.27q0-69.81,0-139.61c0-3.76,0-7.53,1-11.19a19.31,19.31,0,0,1,1.35-3.57,10.81,10.81,0,0,1,2-2.7c5.05-5,14.82-3.63,18.33,2.52a19.69,19.69,0,0,1,2.37,8c.22,2.3.35,4.63.35,6.94q0,35.14,0,70.29C322.17,414.68,322.2,437.95,322.14,461.21ZM706.08,270.75q0,93.47,0,186.94c0,5.59.24,11.2.74,16.77a61.7,61.7,0,0,0,5.67,21.45c5.52,11.49,14.6,18.41,27.07,20.77a83.65,83.65,0,0,0,27.95.34c14.32-2.14,24.47-10.05,30.2-23.41a67.12,67.12,0,0,0,3.13-9.3c2.14-8.1,2.57-16.4,2.57-24.74q0-94.67,0-189.33c0-.48,0-1,0-1.44s-.16-1-.24-1.53c-4.28-.43-34.73-.26-36.71.24v3q0,94.91,0,189.81c0,2.24,0,4.48-.14,6.72a20.8,20.8,0,0,1-1.88,7.88,9.26,9.26,0,0,1-6.56,5.5c-6.28,1.33-10.7-.8-13.06-6.45a12.68,12.68,0,0,1-1-3.43,90.25,90.25,0,0,1-.72-9.55q-.06-94.07,0-188.13c0-1.28,0-2.56,0-3.84,0-.61-.14-1.21-.22-1.86H706.08Zm-42.37-3.44c-4.14-.53-41.43-.32-43.06.2-1.7,9.77-29.16,244.86-28.85,247.17h32l4.5-46.34H655l4.82,46.31h35Zm-31,163.82c-.53-2.17,8.21-86.06,9.14-88.55l9.33,88.55ZM39.38,147.48c7.83-.11,15.7.2,23.49-.43C76.6,145.94,86,138.69,91,125.76a61,61,0,0,0,3.69-21.64q.16-31.32,0-62.63a58.16,58.16,0,0,0-3.08-19.57A26.44,26.44,0,0,0,72.92,4.49,49.13,49.13,0,0,0,59.65,2.64q-28.92-.08-57.83,0A15.51,15.51,0,0,0,0,2.81V250.16H36.18V147.48C37.49,147.48,38.44,147.5,39.38,147.48ZM47,36.31c5.74.32,9.2,3.31,10.32,8.92A37.3,37.3,0,0,1,58,52.37q.09,21.48,0,43a41.21,41.21,0,0,1-.74,7.86c-1.06,5.3-4.21,8-9.6,8.44-3.34.25-6.71.14-10.07.17a6.54,6.54,0,0,1-1.21-.23V36.27C40.09,36.27,43.54,36.12,47,36.31ZM531.18,405.63h35.71c.54-2.47.48-35.63-.07-37.74H531.21V303h45.87V267.33c-3.47-.52-80.62-.35-82.27.16q0,123.53,0,247c2.94.48,82.49.36,84.2-.1.43-4.09.25-35.34-.26-37.24H531.18ZM360.5,141.1h36V103.42H360.62c-.51-3.45-.37-63,.18-64.92h45.75V2.77H324.31c-.51,4-.3,245.72.2,247.4h84V212.74h-48Zm-210.76,0h36.08V103.45H149.76V38.54H195.6c.55-2.84.44-34.12-.08-35.79H113.59c-.49,3.14-.34,245.65.14,247.42h84V212.74h-48ZM307.08,38.52c.52-2.87.42-34.06-.08-35.78H210.66c-.51,2.89-.39,34,.19,35.95h30c0,8.08,0,15.91,0,23.74V203.28c0,7.84,0,15.68,0,23.52s-.12,15.59.09,23.35h35.93V38.52Z"/></svg>
      </Logo>
      <BottomBar id="bottombarRef">
        <LeftCol>{data.subTitleOne}</LeftCol>
        <RightCol>{data.subTitleTwo}</RightCol>
      </BottomBar>
    </Container>
  );
};
